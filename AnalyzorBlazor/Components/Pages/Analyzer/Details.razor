@page "/analyzer/detail/{id:int}"
@inject IDeviceService deviceService
@inject IJSRuntime js
@inject NavigationManager navManager
@rendermode InteractiveServer

<h3>Device Details </h3>
<div class="col-6">

    <EditForm Model="Device">
        <fieldset disabled="true">
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="Name">Name</label>
                </div>
                <div class="col-8">
                    <InputText @bind-Value="Device.Name" class="form-control" />
                    <ValidationMessage For="@(() => Device.Name)" />
                </div>

            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="TotalCount">Quantity</label>
                </div>
                <div class="col-8">
                    <InputNumber @bind-Value="Device.TotalCount" class="form-control" />
                    <ValidationMessage For="@(() => Device.TotalCount)" />
                </div>
            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="TesterTime">Tester Time<br />(Updated by Tester)</label>
                </div>
                <div class="col-8">
                    <InputNumber @bind-Value="Device.TesterTime" class="form-control" />
                    <ValidationMessage For="@(() => Device.TesterTime)" />
                </div>
            </div>

            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="SN">SN</label>
                </div>
                <div class="col-8">
                    <InputText @bind-Value="Device.SN" class="form-control" />
                    <ValidationMessage For="@(() => Device.SN)" />
                </div>
            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="Model">Model</label>
                </div>
                <div class="col-8">
                    <InputText @bind-Value="Device.Model" class="form-control" />
                    <ValidationMessage For="@(() => Device.Model)" />
                </div>
            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="Comments">Tester Comments</label>
                </div>
                <div class="col-8">
                    <InputTextArea @bind-Value="Device.Comments" class="form-control"></InputTextArea>
                    <ValidationMessage For="@(() => Device.Comments)" />
                </div>
            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="OtherComments">Other Tester Comments</label>
                </div>
                <div class="col-8">
                    <InputTextArea @bind-Value="Device.OtherComments" class="form-control"></InputTextArea>
                    <ValidationMessage For="@(() => Device.OtherComments)" />
                </div>
            </div>
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="CreateT">Create Time By Tester</label>
                </div>
                <div class="col-8">
                    <InputDate @bind-Value="Device.CreateT" class="form-control"></InputDate>
                    <ValidationMessage For="@(() => Device.CreateT)" />
                </div>
            </div>
            @if (Device.UpdateT != null)
            {
                <div class="form-group row p-1">
                    <div class="col-4">
                        <label for="UpdateT">Last Update Time by Tester</label>
                    </div>
                    <div class="col-8">
                        <InputDate @bind-Value="Device.UpdateT" class="form-control"></InputDate>
                        <ValidationMessage For="@(() => Device.UpdateT)" />
                    </div>
                </div>
            }
            @if (Device.CreateA != null)
            {
                <div class="form-group row p-1">
                    <div class="col-4">
                        <label for="CreateA">Edit Time By Analyzer</label>
                    </div>
                    <div class="col-8">
                        <InputDate @bind-Value="Device.CreateA" class="form-control"></InputDate>
                        <ValidationMessage For="@(() => Device.CreateA)" />
                    </div>
                </div>
            }
            <div class="form-group row p-1">
                <div class="col-4">
                    <label for="OtherCommentsAz">Other Analyzer Comment</label>
                </div>
                <div class="col-8">
                    <InputTextArea @bind-Value="Device.OtherCommentsAz" class="form-control"></InputTextArea>
                    <ValidationMessage For="@(() => Device.OtherCommentsAz)" />
                </div>
            </div>

        </fieldset>
        <br />
        <button @onclick="GoToEdit" class="btn btn-warning">
            <span class="oi oi-pencil"></span>
            Edit Device
        </button>
        <button @onclick="BackToList" class="btn btn-outline-secondary">
            <span class="oi oi-media-skip-backward"></span>
            Back To List
        </button>
    </EditForm>
</div>
    @code {
        [Parameter]
        public int id { get; set; }
        private Device Device = new Device();
        protected async override Task OnInitializedAsync()
        {
            var responses = await deviceService.Get(id);
            if (responses.Success)
            {
                Device = responses.Data;
            }
        }
        private void GoToEdit()
        {
            navManager.NavigateTo($"/analyzer/update/{Device.Id}");
        }
        private void BackToList()
        {
            navManager.NavigateTo("/analyzer/");
        }

    }
